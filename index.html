<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üè¶ –§–î ¬´–•–∞—è—Ç–∏¬ª ‚Äî –í—Ö–æ–¥</title>
  <link rel="stylesheet" href="css/main.css">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="i18n.js"></script>
</head>
<body>
  <div class="container">
    
    <!-- LOADING SCREEN -->
    <div id="loadingScreen" class="screen">
      <div class="spinner"></div>
      <p>–ó–∞–≥—Ä—É–∑–∫–∞...</p>
    </div>

    <!-- AUTH SCREEN -->
    <div id="authScreen" class="screen hidden">
      <div class="logo">
        <h1>üè¶ –§–î ¬´–•–∞—è—Ç–∏¬ª</h1>
        <p class="subtitle">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–ø–∏—Ç–∞–ª–æ–º</p>
      </div>

      <!-- Login Form -->
      <div id="loginForm" class="form-card">
        <h2>–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h2>
        
        <div class="input-group">
          <label for="loginEmail">Email</label>
          <input type="email" id="loginEmail" placeholder="your@email.com" autocomplete="email">
        </div>

        <div class="input-group">
          <label for="loginPassword">–ü–∞—Ä–æ–ª—å</label>
          <div class="password-input-wrapper">
            <input type="password" id="loginPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password">
            <button type="button" class="btn-toggle-password" onclick="togglePassword('loginPassword')">
              <svg class="eye-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
              </svg>
              <svg class="eye-off-icon hidden" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"/>
              </svg>
            </button>
          </div>
        </div>

        <!-- üÜï FIXED: Compact button (not full-width) -->
        <button id="loginBtn" class="btn-3d btn-3d-ferrari btn-3d-compact">
          <svg class="btn-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 0C8.7 0 6 2.7 6 6v2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2h-2V6c0-3.3-2.7-6-6-6zm0 2c2.2 0 4 1.8 4 4v2H8V6c0-2.2 1.8-4 4-4zm0 12c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z"/>
          </svg>
          <span>–í–æ–π—Ç–∏</span>
          <svg class="btn-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
            <path d="M10 0l10 10-10 10-2-2 6-6H0V8h14l-6-6 2-2z"/>
          </svg>
        </button>
        
        <div class="links">
          <a href="#" id="forgotPasswordLink">–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?</a>
          <a href="#" id="showRegisterLink">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
        </div>

        <div id="loginError" class="error hidden"></div>
      </div>

      <!-- Register Form -->
      <div id="registerForm" class="form-card hidden">
        <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
        
        <div class="input-group">
          <label for="registerEmail">Email</label>
          <input type="email" id="registerEmail" placeholder="your@email.com" autocomplete="email">
        </div>

        <div class="input-group">
          <label for="registerPassword">–ü–∞—Ä–æ–ª—å</label>
          <div class="password-input-wrapper">
            <input type="password" id="registerPassword" placeholder="–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤" autocomplete="new-password">
            <button type="button" class="btn-toggle-password" onclick="togglePassword('registerPassword')">
              <svg class="eye-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
              </svg>
              <svg class="eye-off-icon hidden" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"/>
              </svg>
            </button>
          </div>
        </div>

        <div class="input-group">
          <label for="registerPasswordConfirm">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å</label>
          <div class="password-input-wrapper">
            <input type="password" id="registerPasswordConfirm" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="new-password">
            <button type="button" class="btn-toggle-password" onclick="togglePassword('registerPasswordConfirm')">
              <svg class="eye-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
              </svg>
              <svg class="eye-off-icon hidden" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"/>
              </svg>
            </button>
          </div>
        </div>

        <button id="registerBtn" class="btn-3d btn-3d-ferrari btn-3d-compact">
          <svg class="btn-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"/>
          </svg>
          <span>–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</span>
        </button>
        
        <div class="links">
          <a href="#" id="showLoginLink">–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? –í–æ–π—Ç–∏</a>
        </div>

        <div id="registerError" class="error hidden"></div>
      </div>

      <!-- Reset Password Form -->
      <div id="resetForm" class="form-card hidden">
        <h2>–°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è</h2>
        
        <p class="info-text">–í–≤–µ–¥–∏—Ç–µ –≤–∞—à email, –∏ –º—ã –æ—Ç–ø—Ä–∞–≤–∏–º —Å—Å—ã–ª–∫—É –¥–ª—è —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è</p>
        
        <div class="input-group">
          <label for="resetEmail">Email</label>
          <input type="email" id="resetEmail" placeholder="your@email.com" autocomplete="email">
        </div>

        <button id="resetBtn" class="btn-3d btn-3d-compact">
          <svg class="btn-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10c1.85 0 3.58-.51 5.07-1.39l-1.45-1.45C14.43 19.72 13.26 20 12 20c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8c0 1.48-.41 2.86-1.12 4.06l1.46 1.46C21.42 15.69 22 13.91 22 12c0-5.52-4.48-10-10-10zm-1 5v6l5.25 3.15.75-1.23-4.5-2.67V7H11z"/>
          </svg>
          <span>–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É</span>
        </button>
        
        <div class="links">
          <a href="#" id="backToLoginLink">–ù–∞–∑–∞–¥ –∫ –≤—Ö–æ–¥—É</a>
        </div>

        <div id="resetError" class="error hidden"></div>
        <div id="resetSuccess" class="success hidden"></div>
      </div>
    </div>

    <!-- CABINET SCREEN -->
    <div id="cabinetScreen" class="screen hidden">
      <div class="cabinet-card">
        <div class="cabinet-header">
          <h2>üíº –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h2>
          <p class="user-email">loading...</p>
        </div>

        <div class="cabinet-content">
          <p>üéâ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</p>
          <p>–ó–¥–µ—Å—å –±—É–¥–µ—Ç –≤–∞—à –∫–∞–±–∏–Ω–µ—Ç —Å –±–∞–ª–∞–Ω—Å–æ–º, –ø–ª–∞—Ç–µ–∂–∞–º–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∫–∞–ø–∏—Ç–∞–ª–æ–º.</p>
        </div>

        <div class="cabinet-actions">
          <button onclick="logout()" class="btn-3d btn-3d-glass btn-3d-full">
            <svg class="btn-icon btn-icon-left" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
              <path d="M3 0h10v2H3v16h10v2H3c-1.1 0-2-.9-2-2V2C1 .9 1.9 0 3 0zm14.6 9L14 5.4 15.4 4 21 9.6 15.4 15.2 14 13.6l3.6-3.6H7V8h10.6z"/>
            </svg>
            <span>–í—ã–π—Ç–∏</span>
          </button>
          
          <button onclick="showProfileMenu()" class="btn-3d btn-3d-glass btn-3d-full">
            <svg class="btn-icon btn-icon-left" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
              <path d="M10 0c1.1 0 2 .9 2 2v1c1.2.4 2.2 1 3.1 1.9l.7-.7c.8-.8 2-.8 2.8 0 .8.8.8 2 0 2.8l-.7.7c.9.9 1.5 1.9 1.9 3.1h1c1.1 0 2 .9 2 2s-.9 2-2 2h-1c-.4 1.2-1 2.2-1.9 3.1l.7.7c.8.8.8 2 0 2.8-.8.8-2 .8-2.8 0l-.7-.7c-.9.9-1.9 1.5-3.1 1.9v1c0 1.1-.9 2-2 2s-2-.9-2-2v-1c-1.2-.4-2.2-1-3.1-1.9l-.7.7c-.8.8-2 .8-2.8 0-.8-.8-.8-2 0-2.8l.7-.7C1 14.2.4 13.2 0 12H0c-1.1 0-2-.9-2-2s.9-2 2-2h1c.4-1.2 1-2.2 1.9-3.1l-.7-.7c-.8-.8-.8-2 0-2.8.8-.8 2-.8 2.8 0l.7.7C5.8 1 6.8.4 8 0V0c0-1.1.9-2 2-2zm0 6c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4z"/>
            </svg>
            <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
          </button>
        </div>
      </div>
    </div>

    <!-- PROFILE MENU MODAL -->
    <div id="profileMenu" class="modal hidden">
      <div class="modal-overlay" onclick="closeProfileMenu()"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h3>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è</h3>
          <button onclick="closeProfileMenu()" class="btn-close">√ó</button>
        </div>
        <div class="modal-body">
          <div class="setting-item">
            <h4>üë§ –ü—Ä–æ—Ñ–∏–ª—å</h4>
            <p class="setting-description">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–º –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏</p>
            <button class="btn-3d btn-3d-small" onclick="alert('üöß –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ')">
              <svg class="btn-icon btn-icon-left" width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
                <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10z"/>
              </svg>
              <span>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</span>
            </button>
          </div>
          
          <div class="setting-item">
            <h4>üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h4>
            <p class="setting-description">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ –æ–ø–æ–≤–µ—â–µ–Ω–∏–π</p>
            <button class="btn-3d btn-3d-small" onclick="alert('üöß –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ')">
              <span>–ù–∞—Å—Ç—Ä–æ–∏—Ç—å</span>
            </button>
          </div>
          
          <div class="setting-item danger-zone">
            <h4>‚ö†Ô∏è –û–ø–∞—Å–Ω–∞—è –∑–æ–Ω–∞</h4>
            <p class="setting-description warning-text">
              –£–¥–∞–ª–µ–Ω–∏–µ —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ —É–¥–∞–ª–∏—Ç –≤—Å–µ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å–∏—Å—Ç–µ–º—ã –§–î ¬´–•–∞—è—Ç–∏¬ª
            </p>
            <button onclick="deleteAccount()" class="btn-3d btn-3d-ferrari btn-3d-small">
              <svg class="btn-icon btn-icon-left" width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
                <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5z"/>
              </svg>
              <span>–£–¥–∞–ª–∏—Ç—å—Å—è –∏–∑ –§–î ¬´–•–∞—è—Ç–∏¬ª</span>
            </button>
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- Firebase & App -->
  <script type="module" src="app.js"></script>
  
  <!-- Password Toggle Script -->
  <script>
    function togglePassword(inputId) {
      const input = document.getElementById(inputId);
      const wrapper = input.closest('.password-input-wrapper');
      const toggleBtn = wrapper.querySelector('.btn-toggle-password');
      const eyeIcon = toggleBtn.querySelector('.eye-icon');
      const eyeOffIcon = toggleBtn.querySelector('.eye-off-icon');
      
      if (input.type === 'password') {
        input.type = 'text';
        eyeIcon.classList.add('hidden');
        eyeOffIcon.classList.remove('hidden');
      } else {
        input.type = 'password';
        eyeIcon.classList.remove('hidden');
        eyeOffIcon.classList.add('hidden');
      }
    }
    
    function showProfileMenu() {
      document.getElementById('profileMenu').classList.remove('hidden');
      document.body.style.overflow = 'hidden';
    }
    
    function closeProfileMenu() {
      document.getElementById('profileMenu').classList.add('hidden');
      document.body.style.overflow = 'auto';
    }
    
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        closeProfileMenu();
      }
    });
  </script>
</body>
</html>
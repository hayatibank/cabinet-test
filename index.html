<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title data-i18n="app.title">üè¶ –§–î ¬´–•–∞—è—Ç–∏¬ª ‚Äî –í—Ö–æ–¥</title>
  
  <!-- üÜï FAVICON: Official HYC Logo -->
  <link rel="icon" type="image/jpeg" href="https://hayati-coin.github.io/website/OfficialLogo.jpg">
  <link rel="apple-touch-icon" href="https://hayati-coin.github.io/website/OfficialLogo.jpg">
  
  <link rel="stylesheet" href="css/main.css">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <div class="container">
    
    <!-- ======================== -->
    <!-- LOADING SCREEN -->
    <!-- ======================== -->
    <div id="loadingScreen" class="screen">
      <div class="spinner"></div>
      <p data-i18n="common.loading">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
    </div>

    <!-- ======================== -->
    <!-- AUTH SCREEN -->
    <!-- ======================== -->
    <div id="authScreen" class="screen hidden">
      <div class="logo">
        <h1>üè¶ –§–î ¬´–•–∞—è—Ç–∏¬ª</h1>
        <p class="subtitle" data-i18n="app.subtitle">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–ø–∏—Ç–∞–ª–æ–º</p>
      </div>

      <!-- Login Form -->
      <div id="loginForm" class="form-card">
        <h2 data-i18n="auth.login.title">–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h2>
        
        <div class="input-group">
          <label for="loginEmail" data-i18n="auth.login.email">Email</label>
          <input type="email" id="loginEmail" data-i18n="auth.login.emailPlaceholder" placeholder="your@email.com" autocomplete="email">
        </div>

        <div class="input-group">
          <label for="loginPassword" data-i18n="auth.login.password">–ü–∞—Ä–æ–ª—å</label>
          <div class="password-input-wrapper">
            <input type="password" id="loginPassword" data-i18n="auth.login.passwordPlaceholder" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password">
            <button type="button" class="btn-toggle-password" onclick="togglePassword('loginPassword')">
              <svg class="eye-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
              <svg class="eye-off-icon hidden" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/>
                <line x1="1" y1="1" x2="23" y2="23"/>
              </svg>
            </button>
          </div>
        </div>

        <button id="loginBtn" class="btn-3d btn-3d-compact">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
          </svg>
          <span data-i18n="auth.login.submit">–í–æ–π—Ç–∏</span>
        </button>
        
        <div class="links">
          <a href="#" id="forgotPasswordLink" data-i18n="auth.login.forgotPassword">–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?</a>
          <a href="#" id="showRegisterLink" data-i18n="auth.login.register">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
        </div>

        <div id="loginError" class="error hidden"></div>
      </div>

      <!-- Register Form -->
      <div id="registerForm" class="form-card hidden">
        <h2 data-i18n="auth.register.title">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
        
        <div class="input-group">
          <label for="registerEmail" data-i18n="auth.register.email">Email</label>
          <input type="email" id="registerEmail" data-i18n="auth.register.emailPlaceholder" placeholder="your@email.com" autocomplete="email">
        </div>

        <div class="input-group">
          <label for="registerPassword" data-i18n="auth.register.password">–ü–∞—Ä–æ–ª—å</label>
          <div class="password-input-wrapper">
            <input type="password" id="registerPassword" data-i18n="auth.register.passwordPlaceholder" placeholder="–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤" autocomplete="new-password">
            <button type="button" class="btn-toggle-password" onclick="togglePassword('registerPassword')">
              <svg class="eye-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
              <svg class="eye-off-icon hidden" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/>
                <line x1="1" y1="1" x2="23" y2="23"/>
              </svg>
            </button>
          </div>
        </div>

        <div class="input-group">
          <label for="registerPasswordConfirm" data-i18n="auth.register.passwordConfirm">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å</label>
          <div class="password-input-wrapper">
            <input type="password" id="registerPasswordConfirm" data-i18n="auth.register.passwordConfirmPlaceholder" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="new-password">
            <button type="button" class="btn-toggle-password" onclick="togglePassword('registerPasswordConfirm')">
              <svg class="eye-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
              <svg class="eye-off-icon hidden" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/>
                <line x1="1" y1="1" x2="23" y2="23"/>
              </svg>
            </button>
          </div>
        </div>

        <button id="registerBtn" class="btn-3d btn-3d-compact">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"/>
          </svg>
          <span data-i18n="auth.register.submit">–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</span>
        </button>
        
        <div class="links">
          <a href="#" id="showLoginLink" data-i18n="auth.register.haveAccount">–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? –í–æ–π—Ç–∏</a>
        </div>

        <div id="registerError" class="error hidden"></div>
      </div>

      <!-- Reset Password Form -->
      <div id="resetForm" class="form-card hidden">
        <h2 data-i18n="auth.reset.title">–°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è</h2>
        
        <p class="info-text" data-i18n="auth.reset.info">–í–≤–µ–¥–∏—Ç–µ –≤–∞—à email, –∏ –º—ã –æ—Ç–ø—Ä–∞–≤–∏–º —Å—Å—ã–ª–∫—É –¥–ª—è —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è</p>
        
        <div class="input-group">
          <label for="resetEmail" data-i18n="auth.reset.email">Email</label>
          <input type="email" id="resetEmail" data-i18n="auth.reset.emailPlaceholder" placeholder="your@email.com" autocomplete="email">
        </div>

        <button id="resetBtn" class="btn-3d btn-3d-compact">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18zM18 14H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/>
          </svg>
          <span data-i18n="auth.reset.submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É</span>
        </button>
        
        <div class="links">
          <a href="#" id="backToLoginLink" data-i18n="auth.reset.backToLogin">–ù–∞–∑–∞–¥ –∫ –≤—Ö–æ–¥—É</a>
        </div>

        <div id="resetError" class="error hidden"></div>
        <div id="resetSuccess" class="success hidden"></div>
      </div>
    </div>

    <!-- ======================== -->
    <!-- CABINET SCREEN -->
    <!-- ======================== -->
    <div id="cabinetScreen" class="screen hidden">
      <div class="cabinet-card">
        <div class="cabinet-header">
          <h2 data-i18n="cabinet.title">üíº –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h2>
          <p class="user-email">loading...</p>
          <!-- HYC balance will be rendered here by hycUI.js -->
        </div>

        <div class="cabinet-content">
          <p data-i18n="app.cabinetWelcome">üéâ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</p>
          <p data-i18n="app.cabinetDescription">–ó–¥–µ—Å—å –±—É–¥–µ—Ç –≤–∞—à –∫–∞–±–∏–Ω–µ—Ç —Å –±–∞–ª–∞–Ω—Å–æ–º, –ø–ª–∞—Ç–µ–∂–∞–º–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∫–∞–ø–∏—Ç–∞–ª–æ–º.</p>
        </div>

        <div class="cabinet-actions">
          <button onclick="logout()" class="btn btn-3d">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
            </svg>
            <span data-i18n="auth.logout.button">–í—ã–π—Ç–∏</span>
          </button>
          
          <button onclick="showProfileMenu()" class="btn btn-3d">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94L14.4 2.81c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
            </svg>
            <span data-i18n="cabinet.settings">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
          </button>
        </div>
      </div>
    </div>

    <!-- ======================== -->
    <!-- PROFILE MENU MODAL -->
    <!-- ======================== -->
    <div id="profileMenu" class="modal hidden">
      <div class="modal-overlay" onclick="closeProfileMenu()"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h3 data-i18n="settings.title">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è</h3>
          <button onclick="closeProfileMenu()" class="btn-close">√ó</button>
        </div>
        <div class="modal-body">
          <div class="setting-item">
            <h4 data-i18n="settings.profile.title">üë§ –ü—Ä–æ—Ñ–∏–ª—å</h4>
            <p class="setting-description" data-i18n="settings.profile.description">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–º –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏</p>
            <button class="btn btn-secondary btn-small" onclick="alert(t('settings.inDevelopment'))">
              <span data-i18n="settings.profile.edit">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</span>
            </button>
          </div>
          
          <div class="setting-item">
            <h4 data-i18n="settings.notifications.title">üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h4>
            <p class="setting-description" data-i18n="settings.notifications.description">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ –æ–ø–æ–≤–µ—â–µ–Ω–∏–π</p>
            <button class="btn btn-secondary btn-small" onclick="alert(t('settings.inDevelopment'))">
              <span data-i18n="settings.notifications.configure">–ù–∞—Å—Ç—Ä–æ–∏—Ç—å</span>
            </button>
          </div>
          
          <div class="setting-item danger-zone">
            <h4 data-i18n="settings.dangerZone.title">‚ö†Ô∏è –û–ø–∞—Å–Ω–∞—è –∑–æ–Ω–∞</h4>
            <p class="setting-description warning-text" data-i18n="settings.dangerZone.warning">
              –£–¥–∞–ª–µ–Ω–∏–µ —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ —É–¥–∞–ª–∏—Ç –≤—Å–µ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å–∏—Å—Ç–µ–º—ã –§–î ¬´–•–∞—è—Ç–∏¬ª
            </p>
            <button onclick="deleteAccount()" class="btn btn-danger btn-small">
              <span data-i18n="settings.dangerZone.deleteButton">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å—Å—è –∏–∑ –§–î ¬´–•–∞—è—Ç–∏¬ª</span>
            </button>
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- Firebase & App -->
  <script type="module" src="app.js"></script>
  
  <!-- Profile Menu Functions -->
  <script type="module">
    import { t } from './js/utils/i18n.js';
    
    // Make t() available globally for onclick handlers
    window.t = t;
    
    function showProfileMenu() {
      document.getElementById('profileMenu').classList.remove('hidden');
      document.body.style.overflow = 'hidden';
    }
    
    function closeProfileMenu() {
      document.getElementById('profileMenu').classList.add('hidden');
      document.body.style.overflow = 'auto';
    }
    
    // Make functions global
    window.showProfileMenu = showProfileMenu;
    window.closeProfileMenu = closeProfileMenu;
    
    // Close on Escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        closeProfileMenu();
      }
    });
    
    // Password toggle function
    function togglePassword(inputId) {
      const input = document.getElementById(inputId);
      const wrapper = input.closest('.password-input-wrapper');
      const eyeIcon = wrapper.querySelector('.eye-icon');
      const eyeOffIcon = wrapper.querySelector('.eye-off-icon');
      
      if (input.type === 'password') {
        input.type = 'text';
        eyeIcon.classList.add('hidden');
        eyeOffIcon.classList.remove('hidden');
      } else {
        input.type = 'password';
        eyeIcon.classList.remove('hidden');
        eyeOffIcon.classList.add('hidden');
      }
    }
  </script>
</body>
</html>